 Open Freelance Accounting - TODO

 Summary
 =======

   TODO
   DONE

-----------------------------------------------------------------------
 TODO
 ====

   1 2014- 5- 2 have a dns domain for the application
                (e.g. open-freelance-accounting.org)

   3 2014- 5- 2 ofa.doap: have a download page

   5 2014- 5- 2 ofa.doap: have a mailing list

   7 2014- 5- 2 have a preference to set the application menu on the
                top bar (gnome-shell) or on the main windows

  21 2014- 5- 6 DossierNew: let the user be able to choose to
                create a new database (if the data provider allows it)
                or to use an existing one
     2014- 7-14 when using an existing database, have an option to
                reinitialize it, or to use it as is

  40 2014- 5-12 ofaMainWindow: set accels when changing the menubar

  41 2014- 5-12 ofaMainWindow: set menu tooltips

  43 2014- 5-12 ofaMainWindow left pane: should display a big icon and
                a label instead of only a text

  49 2014- 5-15 All properties: monitor "notes" size so
                that we stop the entering at 512 chars
     2014- 6-21 at 4096 chars now...
     2015-10- 6 monitoring works and doesn't allow more than 4095 chars
                but keep emitting a Gtk-Warning

  85 2014- 5-21 Color the frame of the invalid GtkEntry
                + set data "ofa-data-entry-valid"
                + my_utils_entry_is_valid
                + my_utils_entry_set_valid
     2014- 5-22 see also (cancelled) todo #20

  89 2014- 522 Guided input: have a transaction when writing the new
               entries so that we can rollback in case of an error

 126 2014- 5-28 have several demo dossiers

 152 2014- 6- 3 import qif files

 153 2014- 6- 3 import ofx/ofc files

 161 2014- 6- 5 Reconciliation: display the bank account balance if
                present

 195 2014- 6-11 optimize the usage of SELECT COUNT(*) FROM 
                OFA_T_ECRITURES WHERE ECR_JOU_MNEMO=%s query (called 4
                 times on a journal selection in journal_treeview from
                 journals_set)

 213 2014- 6-13 recurrente entries
     2014- 6-16 to be built as a plugin
     2015- 3-17 define new 'recurrent' plugin - git #4affe14

 215 2014- 6-13 assets management
     2014- 6-16 to be built as a plugin

 217 2014- 6-13 tableau de trésorerie
     2014-10- 6 this may require the balance be printed
     2014-10- 6 this should be implemented as a plugin

 253 2014- 6-24 editing rough entries: have a 'select' button besides 
                of the account number when editing an entry

 254 2014- 6-24 editing rough entries: have a 'select' button besides
                of the ledger mnemo when editing an entry

 255 2014- 6-23 editing rough entries: add a button to revert the 
                modifications
 
 256 2014- 6-23 editing rough entries: add an icon to advertise that 
                the row has been modified
     2015- 2- 5 the entry is saved as soon as the edition finishes
                so there would be an added value if and only if we
                would have a modification history and would be capable
                of going back...

 259 2014- 6-23 editing rough entries: copy/paste a line

 273 2014- 6-29 ofa.css: hack ofaTabLabel/GtkGrid/GtkButton/GtkImage 
                styles

 296 2014- 7-20 creating a new dossier from an existing database needs
                to insert the new admin user from root account (else
                the new user will not be able to connect for updating
                the model)
     2015- 1-22 this is removed from now: only able to create a new
                database when restoring an exercice

 303 2014- 8-15 dropping the administrative accounts when deleting a
                dossier is not possible without first checking that
                none of the candidate admin accounts are used in
                any of the databases of the DB server
                -> so the dossier manager should take care of that

 312 2014- 9-22 myEditableAmount: should limit the count of decimals

 313 2014- 9-22 myEditableAmount: should have a format string to
                display a 'decoration' when rendering (e.g. a unit, or
                a standard prefix, or a display format)

 314 2014- 9-26 have a preference to use millenary shortcut
                (i.e. entering '14' gives '2014')

 325 2014-10-12 DossierManage Properties: to be written

 333 2014-10-18 ViewEntries, Reconciliation: two main pages which display
                a GtkTreeView with debit/credit amount columns:
                homogeneize the display (frame), define a footer bar,
                updating the right decalage as far as columns are 
                displayed

 334 2014-10-18 homogeneize styles:
                e.g. displaying validated entries in ofaViewEntries or
                validated balances if AccountProperties should have the
                same font/background
                + may be useful to use styles ?

 335 2014-10-18 some columns are displayed in several pages/dialogs,
                and should have the same display properties (e.g.
                piece reference, label, debit/credit, etc.) -> the 
                treeview setup should be factorized

 336 2014-10-18 all treeview columns in main pages should be resizeable
                (autoresize on double click is automatically handled)
                and the current width should be kept in settings
     2015- 1-22 no GtkTreeViewColumn primitive for setting a width ??

 442 2014-11-13 AccountsBook: add a notes indicator
     2014-12-19 started with svn #4348
                bug left: no background on highlighted rows...

 445 2014-11-13 my_date: do not accept two successive '/'
     2014-11-23 done - svn #4145
     2015- 1- 8 opened back as doesn't work

 461 2014-11-24 ExportAssistant: implement 'on_new_profile'

 462 2014-11-26 move ofoBat/ofoBatLine to ofaBoxed
     2015- 1- 5 really only required when ofoBat/ofoBatLine will implement
                the ofaIExportable interface - so it is not urgent

 463 2014-11-26 move ofoCurrency to ofaBoxed
     2015- 1- 5 really only required when ofoCurrency will implement the
                ofaIExportable interface *and* if exports any amounts -
                so it is not urgent
     2015- 1- 8 nonetheless required to correctly implement field sep

 464 2014-11-26 move ofoDossier to ofaBoxed
     2015- 1- 5 really only required when ofoDossier will implement the
                ofaIExportable interface *and* if exports any amounts -
                so it is not urgent
     2015- 1- 8 nonetheless required to correctly implement field sep

 469 2014-11-28 ExportSettings: the field separator should be free 
                (but not empty nor space) instead of having to select
                among predefined values
     2015- 4- 1 when done, review the Preferences which becomes non
                validable if export field separator is empty

 472 2014-11-29 set dialogs readonly if not current exercice
     2015- 2- 5 done for properties

 494 2014-12- 4 ExeClosing: have a dossier option to have only one  
                centralisation entry when balancing the accounts, or
                have one entry per account
     2014-12- 7 maybe in a next version...

 513 2014-12- 9 whether balancing accounts are settleable or 
                reconciliable (and shouldn't) has to be checked when 
                setting these accounts for balance

 519 2014-12-11 ExportAssistant: the list of exportables should be
                dynamically computed from the list of classes which
                implement the ofaIExportable interface
     2016- 1-18 this would imply that all candidate classes declare
                themselves to a central hub (not the dossier, but the
                application for example) - which would nonetheless be
                close of the connect_to_hub_signaling_system() calls

 520 2014-12-11 ImportAssistant: the list of importables should be
                dynamically computed from the list of classes which
                implement the ofaIImportable interface
     2016- 1-18 this would imply that all candidate classes declare
                themselves to a central hub (not the dossier, but the
                application for example)
                application for example) - which would nonetheless be
                close of the connect_to_hub_signaling_system() calls

 525 2014-12-13 when importing entries: review the code to be faster
                import accounts: 0.02286 s/row - 0.02316 s/row (127 rows)
                import ledgers:  0.02982 s/row (9 rows)
                import entries:  0.13268 s/row (2431 rows)
                import entries:  0.13237 s/row (1985 rows)
     2015- 1- 9 problem is the same when closing ledgers
     2015- 1-10 idem when validating entries:
                count=484: average is 0.09846 s

 553 2015- 1- 6 deleting a dossier only removes its references from
                settings - so DossierDelete and DossierDeletePrefs
                become useless (see also #522)

 559 2015- 1- 8 have a macro language to automate dossier creation,
                import of files

 562 2015- 1- 8 Add misc menu option to see the loaded stores, and
                reset them

 567 2015- 1- 9 have an EntryStore ?
     2015- 1-18 - ofaViewEntries add its own columns to its store
                - ofaReconciliation is a tree store with bat lines
                so the usefulness has yet to be proved...

 572 2015- 1-10 refactor: get rid of amounts (not rates), replacing 
                them with integers ?
     2015- 2-16 ofsCurrency makes use of a work-around when checking
                the accounts/entries/ledgers balances
     2015- 3-11 or move the currency to an arbitrary unit per account,
                the currency being only a sort of unit (but may also
                be a day count, etc.) 

 584 2015- 1-12 ofo_insert_entry: should also insert reconciliation and
                settlement data groups if they are set in the object
                (would prevent two updates when closing the exercice)

 599 2015- 1-22 GtkFileChooser in an assistant: unable to select again
                the previously selected file when coming back from an
                other page

 601 2015- 1-24 ExerciceClose: reset BAT files and lines from the new
                database

 621 2015- 2- 2 ope template: have an help dialog which lists the 
                available macro and functions
     2015- 2- 3 doesn't know how to make ofaOpeTemplateHelp non modal
                while keeping to react to user interactions

 628 2015- 2- 3 FATAL: OpeTemplateProperties: segfault when saving

 632 2015- 2- 8 desktop file: use prefix when installing icon elsewhere
                than standard prefix=/usr

 652 2015- 2-15 let the user configure colors
     2015- 3-13 (branch colors) doesn't know how to go back from custom 
                in GtkColorChooserWidget (this is bad)
                + have to decide whether dossier color is a user pref
                or a dossier pref (for all users of this dossier)

 653 2015- 2-17 GuidedInputBin/OpeTemplateProperties dialogs should be
                non-modal (use case: consult rates)

 656 2015- 2-17 OpeTemplate page: have a shortcut on each tab

 668 2015- 2-17 have main notebook pages detachable ? getting so non-
                modal dialogs
     2015- 2-20 this requires to implement DnD on some non-modal windows

 669 2015- 2-17 have a visual way to distinct between dossiers (e.g. a
                color, a logo, etc.)

 677 2015- 2-19 preferences for the dossier should be set in the dbms
                (e.g. order of ope_templates pages)
     2015- 2-20 why ? to save them in backups and be able to restore 
                them 

 684 2015- 2-21 MainWindow left pane: these are shortcuts which should
                be choosable by the user among the defined features

 701 2015- 3- 8 be able to open a current dossier as read-only
                (use case: when user wants to make sure he will not
                modify it inadvertently)

 706 2015- 3- 9 be able to configure some user shortcuts (in particular,
                it would be easier that row-activate on templates page
                opens the guided input rather that the properties)

 707 2015- 3- 9 it would be easier to be directly in overwrite mode
                (and to better manage it) when entering a date: this
                would prevent the user to have to first select the digits
                to be changed

 714 2015- 3-11 associate an account with a piece ref
                (e.g. ESP->531, CCP->51441, and so on)

 719 2015- 3-13 Reconciliation: when new entries are added after having
                already set a BAT file, new propositions are not 
                expanded

 720 2015- 3-13 Reconciliation: when declining a proposition, should
                search for the next

 729 2015- 3-14 PrintLedgers: have an option to print a summary

 732 2015- 3-15 have a misc option to consult the audit log

 733 2015- 3-15 be able to search for an entry

 744 2015- 3-19 have an option to automatically check the balances when
               opening the dossier

 745 2015- 3-19 AccountSelect: scroll the treeview to make sure the pre-
                selected account is displayed

 751 2015- 3-20 Reconciliation: associate the bat file with the openbook
                account as soon as we reconciliate one line thus refusing
                the selection for another account
                + add this account number to treeview from bat page
                + add this account number to bat properties

 752 2015- 3-20 Reconciliation: when selecting a bat file, only allow
                those which are associated with the current account
                number (if any) - of those which are not yet associated

 754 2015- 3-21 add unused count to bat page treeview

 758 2015- 3-21 warns when deleting a settled or reconciliated entry
                +unsettle/unreconciliate

 761 2015- 3-22 in the warning displayed when restoring to a database,
                display the target database in bold (or red)

 783 2015- 4- 3 have a summary of unsettle/unreconciliated entries which
                will be reported after exercice closing

 790 2015- 4- 6 GuidedInputEx: replace the treeview by a revealer ?

 792 2015- 4- 6 have a comment in the backup

 793 2015- 4- 8 Consolidate preferences from IDatesFilter with those of
                the calling window (as much as possible)

 796 2015- 4-13 IRenderable: have a second level of grouping (subgroup)
                use case: when printing accounts book, have a subtotal
                per class

 798 2015- 4-13 creating a new ledger let the user enter an entry at
                any effect date, even if all other ledgers has been
                previously closed - this may or may not be wanted -
                so we have to distinguish:
                - closing a ledger at a given date
                - closing a period at a given date
                (+ closing an exercice)
     2015-10- 8 DOS_LAST_CLOSING is date of last closed period and has
                been introduced with DB model v26; it is not used at
                this time

 799 2015- 4-13 AccountsBook account top and bottom reports:
                - add a label [bottom report] or [top report] ?
                - in italic ?
                - added to the account label or rigt-aligned before the
                  debit ?

 808 2015- 4-17 when rendering, automatically computes the width of 
                standard field as date or amount
     2015- 4-20 depending of the different headers and footers of the
                current print, this should involve selecting the ad-hoc
                font before computing the size

 809 2015- 4-17 when computing the ODs, do not generate an OD for 
                "forfait kilométrique BNC" when option is "FR"

 810 2015- 4-17 when computing the ODs, the "Frais réels du véhicule"
                should distinguish HT and TVA (but, yes, compute on
                TTC)

 811 2015- 4-17 Le compte d'équilibre de l'OD de régularisation de la
                CSG non déductible ne devrait pas être un compte de
                charge

 812 2015- 4-17 libellé des écritures d'amortissement: ajouter le numéro
                d'annuité et le nb total (#7 - 3/4)

 814 2015- 4-17 Dossier: have list of classes allowed to be reconciliated
                 + classes allowed to be settled

 821 2015- 4-27 check that concenating strings doesn't override the limit
                (as the MySQL truncation may make the string invalid utf-8)
                and take care to truncate to a valid utf-8

 822 2015- 4-27 Review "solde at 01/01": these are not accounts balances
                after entries from 01/01, but opening exercice after 
                carried forward entries *only*

 824 2015- 9-22 use AX_COMPILER_FLAGS

 825 2015- 9-22 use AM_GNU_GETTEXT instead of AM_GLIB_GNU_GETTEXT

 826 2015- 9-22 use GResource

 843 2015- 9-30 account number should be renamed as account identifier

 853 2015-10- 1 review v_init_dialog's:
                - only store GtkWidget (as GtkWidget *) when needed
                - store object data members
                - set data before connecting the signal
                  (or after the end of init ?)
                  (so is not triggered now)
                - set container editable after notes
                - have ok_btn instead of btn_ok
                - update ok_btn when setting readonly buttons
                - call check_enable_dlg at the very end

 862 2015-10- 7 fix focus order on GtkBin-derived widgets on the assistants
                - RestoreAssistant: dossier treeview after created a new dossier
                - administrative credentials

 869 2015-10-30 GuidedInput: after having clicked on Validate, disable
                fields while recording the entries

 885 2015-11- 7 Have an operation counter (identifier)
                Use case: be able to delete the whole operation when the
                user wants to delete an entry

 886 2015-11- 7 ExerciceClosing: purge reconciliation groups when both
                bat files and entries are purged

 909 2015-11-26 SIGNAL_DOSSIER_EXE_DATE_CHANGED: change to same signal
                (exe_dates_changed) sent on main window so that it may
                automatically update window title

 910 2015-11-30 let the user configure the main title as a preference

 915 2015-12- 4 a class object (say e.g. ofoClass) should implement
                the ofaIExportable/ofaIImportable interfaces - but the
                exporter/importer plugins should rather implement a
                ofaIEXporter/ofaIImporter interface 

 919 2015-12-10 my_utils_dialog_info/warning: have a transient parent

 920 2015-12-10 review RestoreAssistant
                + let restore on a selected exercice rather than on the
                   current one

 933 2015-12-15 rename ofa-preferences (too close of ofa-ipreferences)
                while these are rather shortcuts to user preferences

 935 2015-12-17 DDLUpdate: does not show remediation when creating a
                new dossier ?

 937 2015-12-21 either move ofa-main-window.h to api/ (because it is
                needed by ofa-page.h) or say that api/ should only
                contain the actual public API, and thus remove from
                api/ some files which were only pulled up for compilation
                reasons

 938 2015-12-21 distinguish a core api with core objects (eg. for
                command-line only tools) and a ui api which contains
                some base classes and interfaces which would be useful
                for plugins => implies to have a core lib and a ui lib
     2015-12-27 have to choose between api/ui or api-ui styles

 939 2015-12-21 tva/ofoTVAForm: make it importable

 940 2015-12-21 tva/ofoTVAForm: make it exportable

 956 2016- 1- 6 add to make distcheck a script which checks that -def
                includes are always used in headers (and only)

 963 2016- 1-10 obsolete OFA_SIGNAL_DOSSIER_OPENED ?

 964 2016- 1-10 menu-defined and main-window-created are same signal:
                remove one of the two

 965 2016- 1-10 have a closing exercice signal to let the plugin archive
                their data

 966 2016- 1-10 tva/ofoTVARecord: make it printable

 967 2016- 1-10 change the prefix of archive tables

 968 2016- 1-11 use ofa_main_window_get_hub()
                and explain how is designed the hub dynamic between
                main window and ihubber/application and why this is
                relevant

 969 2016- 1-14 increase mnemonic size (ofaOpeTemplate and more ?)

 970

-----------------------------------------------------------------------
 DONE
 ====

 311 2014- 9-21 editing CA12 VAT declaration
     2015-11-14 due to new VAT declaration rules, must also provide a
                monthly CA3
     2016- 1- 2 have a form and recordable declarations
                -> have to interpret the rules to get the amounts
                   + ofo_account_get_balance( account_id, date );
     2016- 1-18 done

 429 2014-11-11 implement print preview inside of Openbook
     2016- 1-16 done long ago with IRenderable interface

 607 2015- 1-29 MainWindow on_dossier_open: homogeneize dossier_open and
                dossier_login in order to mutualize some code if possible
                common behavior is: do not close current dossier if we
                are not sure that credentials are ok
     2016- 1-18 obsoleted by new meta/period architecture

 678 2015- 2-19 visual bug which seems to come from GTK+: updating a
                list/tree store only update the display when moving the
                mouse over the row (not necessarily the updated cell)
                -> gtk_tree_model_filter_refilter doesn't help
     2016- 1-18 this happens to be eventually a Gtk+ bug which has 
                already been reported on some graphic cards

 717 2015- 3-11 AccountsChart: doesn't display '0,00' (but at least one)
     2015- 3-12 are we sure we want this ?
     2016- 1-18 cancelled (at least for now)

 766 2015- 3-26 replace ofaIDataset interface by ofaICollector
     2016- 1-18 ofaIDataset has been obsoleted by ofaICollector/
                ofaICollectionable pair

 791 2015- 4- 6 after having entered new AVRLOY operation template:
                gtk_tree_view_get_model: assertion 'GTK_IS_TREE_VIEW (tree_view)' failed
#2  0x00000037196c20b4 in gtk_tree_view_get_model () from /lib64/libgtk-3.so.0
#3  0x0000000000448bf2 in find_left_ledger_by_mnemo (self=self@entry=0xd614e0, mnemo=0x898e80 "ACH", tmodel=tmodel@entry=0x7fffffffcac8, iter=iter@entry=0x7fffffffcad0)
    at ../../../src/ui/ofa-guided-ex.c:734
#4  0x0000000000448d50 in insert_left_model_row (self=0xd614e0, model=0x1483650) at ../../../src/ui/ofa-guided-ex.c:775
     2015- 4- 7 not reproduced
     2016- 1-18 cancelled (at least for now)

 840 2015- 9-29 ofaAccountSelectorBin: is unused
     2015-10- 1 but see ofaReconciliation and ofaSettlement which both
                need a single account selection
     2015-10- 7 see also (closed) #778
     2016- 1-10 class has been removed

 941 2015-12-27 have an interface to replace ofa_main_window_get_dossier
                 (and idem for ofa_page_get_dossier)
     2015-12-28 + idem for my_window_get_main_window()
     2016- 1- 4 this is ofaIHubber interface associated to ofaHub class
     2016- 1-10 done

 947 2015-12-29 shouldn't all xxx_set_main_window() be xxx_set_dossier() ?
     2016- 1- 6 note that all GtkBin-derived classes and more generally
                all user interface objects require to have the main window
     2016- 1-10 ofa_bat_treeview_set_main_window()   : ok: _set_hub()
                ofa_currency_combo_set_main_window() : ok: _set_hub()
                ofa_ledger_combo_set_main_window()   : ok: _set_hub()
                ofa_ledger_treeview_set_main_window(): ok: _set_hub()
     2016- 1-10 done

 948 2015-12-31 review the ofoDossier class
                which is actually a pivot class with dossier props + connect
     2016- 1- 4 ofa_dossier_misc_xxx should then move to this new class
                > remove ofa_dossier_misc (replaced by ofa_hub): ok
                > review ofa_hub_import_csv api
     2016- 1- 5 obsolete ofa_main_window_open_dossier()      : ok
                + remove exportable_from_dossier             : ok
                + remove importable_to_dossier               : ok
                + remove ofo_base_load_dataset()             : ok
                + ofa_dossier_properties_run: w/o dossier    : -
                + cleanup userid+connect from dossier private: ok
                  (when all classes will be migrated to hub)
     2016- 1- 6 + remove DOSSIER properties from ofaListStore: ok
     2016- 1- 7 obsolete ofo_dossier_has_dispose_run()       : ok
                + ofo_dossier_get_user()                     : ok
                + ofo_dossier_get_connect()                  : ok
     2016- 1-10 done

 949 2015-12-31 review all ofoBase API: shouldn't need to always have 
                ofoDossier
     2015- 1- 6 ofoAccount: done
                ofoBat: done
     2015- 1- 7 ofoCurrency: done
     2015- 1- 8 ofoEntry: done
                ofoLedger: done
     2015- 1- 9 ofoOpeTemplate: done
                ofoRate: done

 950 2015-12-31 ofo_xxx_is_deletable: should decide whether this is
                intrinsic or take into account dossier_is_current
     2015- 1- 6 ofoAccount: intrinsic (up to the caller)
                ofoBat: id.
     2015- 1- 7 ofoCurrency: id.
     2015- 1- 8 ofoLedger: id.
     2015- 1- 9 ofoOpeTemplate: id.
                ofoRate: id.

 951 2015-12-31 review the DB model upgrade to be more explicit on
                plugins DB model updates
     2016- 1- 4 done

 952 2016- 1- 1 gtk_widget_grab_focus( v_get_top_focusable_widget( OFA_PAGE( page )));
     2016- 1- 2 done

 953 2016- 1- 6 move ofoBase->prot->hub to priv
     2016- 1- 6 done

 954 2016- 1- 6 review all -def includes
                -def must have a SECTION comment + minimal code
                main must include -def
                main must never be included in other headers
                (-def must always been used when it exists)
                -def should not be included in .c files
     2016- 1- 6 done

 955 2016- 1- 6 ofaPage: 
                - obsolete ofa_page_get_main_window(): impossible
                - obsolete ofa_page_get_dossier(): ok
     2016- 1- 9 done

 957 2016- 1- 7 obsolete ofaIDataset interface
     2016- 1-10 done

 958 2016- 1- 7 move ENTRY_STATUS_COUNT signal to hub system
     2016- 1-10 done

 959 2016- 1- 8 ofo_ledger_get_last_entry(): have a GDate in the API
     2016- 1- 9 done

 960 2016- 1- 8 ofo_dossier_get_min_deffect: review the api
                dossier should be first
     2016- 1- 9 done

 961 2016- 1- 9 ofaMainWindow:
                - obsolete ofa_main_window_open_dossier(): ok
                - obsolete ofa_main_window_get_dossier(): ok
     2016- 1- 9 done

 962 2016- 1-10 obsolete core/ofo-marshal
     2016- 1-10 done

-----------------------------------------------------------------------
 P. Wieser - Created on 2014, may 2nd
             Last updated on 2016, jan. 1st.
