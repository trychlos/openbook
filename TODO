 Open Freelance Accounting - TODO
 $Id$

 Summary
 =======

   TODO
   DONE

-----------------------------------------------------------------------
 TODO
 ====

   1 2014- 5- 2 define a dns domain for the application
                (e.g. open-freelance-accounting.org)

   2 2014- 5- 2 ofa.doap & configure.ac: have a web site

   3 2014- 5- 2 ofa.doap: have a download page

   4 2014- 5- 2 ofa.doap: have a bug system

   5 2014- 5- 2 ofa.doap: have a mailing list

   6 2014- 5- 2 ofa_application_on_version: to be written

   7 2014- 5- 2 have a preference to set the application menu on the
                top bar (gnome-shell) or on the main windows

   8 2014- 5- 2 ofa_application_on_about: to be written

  18 2014- 5- 4 preference: ask confirmation when quitting the
                 application
     2014- 5- 5 ofa-application.c: variable 'pref_confirm_on_quit'
                ofa-main-window.c: variable 'pref_confirm_on_altf4'

  21 2014- 5- 6 DossierNew: let the user be able to choose to
                create a new database (if the data provider allows it)
                or to use an existing one
     2014- 7-14 when using an existing database, have an option to
                reinitialize it, or to use it as is

  23 2014- 5- 8 Add a progress page to DossierNew dialog, displaying
                the executed SQL statements

  35 2014- 5-10 DossierOpen should monitor the configuration, only
                enabling the action when there is at least one defined
                dossier
     2014- 5-22 see also TODO #42

  36 2014- 5-11 win.close action should only be enabled when a dossier 
                is opened
     2014- 5-22 see also TODO #42

  40 2014- 5-12 ofaMainWindow: set accels when changing the menubar

  41 2014- 5-12 ofaMainWindow: set menu tooltips

  42 2014- 5-12 ofaMainWindow: set menu items sensitivities
     2014- 5-22 See also TODO #35 and #36

  43 2014- 5-12 ofaMainWindow left pane: should display a big icon and
                a label instead of only a text

  49 2014- 5-15 All properties: monitor "notes" size so
                that we stop the entering at 512 chars
     2014- 6-21 at 4096 chars now...

  52 2014- 5-17 change the title of the pages of the models notebook
                when the label of a journal is changed

  57 2014- 5-19 have an entry-derived class for numbers (amounts and
                rates)

  58 2014- 5-19 allow the treeviewes to be sorted
     2014- 6-12 this is mostly needed only in ViewEntries

  60 2014- 5-19 manage locale as a user preference (format for entering
                date, amounts and rates)

  61 2014- 5-19 manage dataserver locale as a user preference (format 
                for storing date, amounts and rates) - this is rather
                a configuration information than actually a user pref..

  79 2014- 5-21 replace memcpy with g_memdup when possible
     2014- 6-27 all memcpy are used for copying GDate of timestamp, so
                are to be replaced with my_utils_date_set_from_date()
                or my_utils_stamp_set_from_???()

  85 2014- 5-21 Color the frame of the invalid GtkEntry
                + set data "ofa-data-entry-valid"
                + my_utils_entry_is_valid
                + my_utils_entry_set_valid
     2014- 5-22 see also Todo #20

  86 2014- 5-21 all GtkFrame: make sure that the label doesn't use
                underscore as the widget can not get focus

  89 2014- 522 Guided input: have a transaction when writing the new
               entries so that we can rollback in case of an error

  96 2014- 5-22 entry_models: check that journal always exist as it
                may be deleted at any time while it is empty -
                so reclass the entry models on journal-changed signal

 100 2014- 5-24 add a ofo_sgbd_query_1_1 method which takes a query and
                returns the first column of the first row as an integer
                applications are: <class>_get_back_id 
                                  <class>_count_for_devise

 101 2014- 5-24 when updating the currency of an account, the 'delete'
                button of the 'currencies' page should be updated
     2014- 6-12 ofaDevisesSet should be connected to ofa_signal_updated
                _object...

 107 2014- 5-24 have a message when current exercice changes
                so that e.g. the journals set may adapt its display

 114 2014- 5-26 dispose_has_run should be a protected data of the
                ofaMainPage base class

 126 2014- 5-28 have several demo dossiers

 129 2014- 5-28 Account: archive balances after closing in ACCOUNT_EXE
                table details

 130 2014- 5-28 do not delete an account which has an account_exe archive
                detail record, but set a 'deleted' flag

 146 2014- 5-31 ImportAssistant::do_init_p3_confirm: remove the mnemonic
                ('_') from the GtktoggleButton label when displaying it

 147 2014- 6- 2 ImportAssistant: keep the last folder and reselect it

 148 2014- 6- 2 ImportAssistant: selecting a folder shouldn't make the
                page complete

 149 2014- 6- 2 ImportAssistant: double-clicking a file (or activating 
                the current selection) should advance to the next page

 151 2014- 6- 2 ofaImport::on_apply: to be written

 152 2014- 6- 3 import qif files

 153 2014- 6- 3 import ofx/ofc files

 155 2014- 6- 3 GuidedInput: diff should be red

 156 2014- 6- 3 when selecting an account, do not allow root (or yes ?)

 158 2014- 6- 4 do a coherency check (sgbd constraints, account and
                journal balances, etc.)

 161 2014- 6- 5 Reconciliation: display the bank account balance if
                present

 162 2014- 6- 5 Reconciliation: remove/add a proposition

 163 2014- 6- 5 move the table definition from ofo-dossier to the
                corresponding classes

 164 2014- 6- 5 ExportAssistant: improve the entering of the output file

 165 2014- 6- 5 ExportAssistant: overwrite confirmation doesn't work 

 167 2014- 6- 5 ExportAssistant: pre-positionning a default uri as
                output filename doesn't work

 174 2014- 6- 6 ExportAssistant: change character set to ISO-8859-15
     2014- 6- 7 the exported character set should be a choice of the 
                user (default is UTF-8)

 176 2014- 6- 6 ImportAssistant: let the user select the encoding
                character set of the imported file, so that we are
                able to convert to UTF-8

 177 2014- 6- 9 there is no sens to manage a GtkTreeView in ofaMainPage

 179 2014- 6- 9 ofaModelsSet: manage delete journal (reclass in 
                'Unclassed')

 182 2014- 6-10 configure at the dossier level the default import journal 
                when we are importing entries
                for now, this is harcoded with 'IMPORT' mnemo
                Note that the journal should be configurable: it is ok
                to import e.g. amortissements entries

 183 2014- 6-10 consistency check: check that we do not have entries on 
                unexistant account (this is the case on EBP export which
                 has kept entries on closed accounts

 184 2014- 6-10 use the count of decimal digits of the currency when 
                displaying all amounts

 186 2014- 6-10 check that the IMPORT journal exists before trying to
                import the entries
     2014- 6-11 Is it really mandatory as the imported entries may do
                not use this default import journal at all ?

 187 2014- 6-10 TauxProperties - Validities page: should be sorted by
                end date desc (most recent first)
     2014- 6-13 no: this should be left sorted as the user entered the
                data - so let him reorder the lines

 191 2014- 6-11 Note that a multi-currency journal is not balanced per
                currency, and so its global balance cannot be checked
     2014- 6-18 not exactly: a multi-currency journal may be balanced
                per currency depending of the way the operations are
                entered (and this way should maybe be forced)

 194 2014- 6-11 ofo_journal_get_cloture() should be replaced with
                ofo_journal_get_last_closing()

 195 2014- 6-11 optimize the usage of SELECT COUNT(*) FROM 
                OFA_T_ECRITURES WHERE ECR_JOU_MNEMO=%s query (called 4
                 times on a journal selection in journal_treeview from
                 journals_set)

 212 2014- 6-13 when importing, accept decimal comma as well as decimal
                dot (and this should be a configuration option of the
                assistant, as well as the character set)

 213 2014- 6-13 recurrente entries
     2014- 6-16 to be built as a plugin

 215 2014- 6-13 assets management
     2014- 6-16 to be built as a plugin

 216 2014- 6-13 exercice closing
     2014-10- 6 keep the account balances at the end of the exercice N
                and at the beginning of exercice N+1

 217 2014- 6-13 tableau de tr√©sorerie
     2014-10- 6 this may require the balance be printed
     2014-10- 6 this should be implemented as a plugin

 219 2014- 6-15 one should take care of not increasing the entry number
                until going back to zero during a same exercice (but
                INT_MAX is a very big number)
     2014- 6-16 maybe by prefixing the entry number with the exercice id
                thus having a full entry identifier as '1-1234'
     2014- 6-16 another way may be to just ignore the issue...

 220 2014- 6-16 GuidedInput-Comment: replace the insensitive entry with
                a normal label + move it to the right in order to be
                aligned with account entry

 224 2014- 6-16 DossierProperties: add a tab for the archived exercices

 229 2014- 6-16 Entry model: duplicate a line

 234 2014- 6-17 the ofaMainPage derived-classes should be named
                ofaPageXxxx (or maybe better ofaXxxxPage)
     2014- 6-20 src/ui/ofa-accounts-chart.h
                src/ui/ofa-bat-set.h
                src/ui/ofa-classes-set.h
                src/ui/ofa-devises-set.h
                src/ui/ofa-guided-ex.h
                src/ui/ofa-journals-set.h
                src/ui/ofa-models-set.h
                src/ui/ofa-rappro.h
                src/ui/ofa-taux-set.h
                src/ui/ofa-view-entries.h

 252 2014- 6-23 make the ofoBase objects members of a dynamic loadable
                library (not a dynamically loadabled plugin) of same
                version than sgbd (i.e. 1 as for now)

 253 2014- 6-24 editing rough entries: have a 'select' button besides 
                of the account number when editing an entry

 254 2014- 6-24 editing rough entries: have a 'select' button besides
                of the journal mnemo when editing an entry

 255 2014- 6-23 editing rough entries: add a button to revert the 
                modifications
 
 256 2014- 6-23 editing rough entries: add an icon to advertise that 
                the row has been modified

 259 2014- 6-23 editing rough entries: copy/paste a line

 260 2014- 6-24 editing rough entries: make the columns sortable

 262 2014- 6-27 make g_date_set_parse locale independant (especially
                when parsing from sql)
     2014- 6-27 this seems good, but treeview cells are not connected
                to my_date, and this interprets the date along the
                locale

 264 2014- 6-27 review MySQL data types against C data types

 265 2014- 6-27 review ofa_t_ecritures index: should be just ecr_number
                and check that ecr_number is an unsigned long
                http://dev.mysql.com/doc/refman/5.0/en/integer-types.html
                http://en.wikibooks.org/wiki/C_Programming/C_Reference/limits.h
                describe the limits.
                Has to choose between
                - Mysql unsigned int 4 294 967 295
                  C UINT_MAX        +4,294,967,295
                - Mysql unsigned bigint 18 446 744 073 709 551 615
                  but BIGINT in a specific MySQL extension
                  C ULONG_MAX          +18,446,744,073,709,551,615
                  but this value of ULONG_MAX is only available in
                  64 bits compilers 

 269 2014- 6-27 lettrage des comptes de tiers

 271 2014- 6-27 ViewEntries: set a default effect date with the ope date

 272 2014- 6-27 Have a myDate class or family of functions and take an
                inventory of use (single case vs. couple case - e.g.
                dope/deff, dfrom/dto, etc.)
     2014- 6-28 svn #3754: introduce myDate class 

 273 2014- 6-29 ofa.css: hack ofaTabLabel/GtkGrid/GtkButton/GtkImage 
                styles

 281 2014- 7-14 move import to myAssistant

 282 2014- 7-14 move export to myAssistant

 296 2014- 7-20 creating a new dossier from an existing database needs
                to insert the new admin user from root account (else
                the new user will not be able to connect for updating
                the model)

 303 2014- 8-15 dropping the administrative accounts when deleting a
                dossier is not possible without first checking that
                none of the candidate admin accounts are used in
                any of the databases of the DB server
                -> so the dossier manager should take care of that

 310 2014- 9-15 locale user preferences:
                for amounts, whether to allow the comma as decimal point
                when entering
                for dates, entry as d/m/yyyy ?

 311 2014- 9-21 editing CA12 VAT declaration

 312 2014- 9-22 myEditableAmount: should limit the count of decimals

 313 2014- 9-22 myEditableAmount: should have a format string to
                display a 'decoration' when rendering (e.g. a unit, or
                a standard prefix, or a display format)

 314 2014- 9-26 have a preference to use millenary shortcut
                (i.e. entering '14' gives '2014')

 317 2014-10- 5 view_entries: let the user select an operation template

 318 2014-10- 6 print the balance for a periode

 319 2014-10- 7 review ofo_entry_get_csv()

 320

-----------------------------------------------------------------------
 DONE
 ====

   9 2014- 5- 3 ofa_application_on_new: to be written
     2014- 5-10 Done

  10 2014- 5- 3 ofa_application_on_open: to be written
     2014- 5-10 Done

  11 2014- 5- 3 Alt+F4: application gracefully exits and main window and
                application are correctly finalized - should intercept
                the keystroke to ask the user (quit requested)
     2014- 5- 3 Done (svn commit #3355)

  12 2014- 5- 3 Control-Q: exit the application without finalizing the
                objects
     2014- 5- 3 Done (svn commit # 3356)

  13 2014- 5- 4 cancel on escape in dossier_new assistant
     2014- 5- 5 Done

  14 2014- 5- 4 have a preference: assistant cancel on escape
     2014- 5- 5 ofa-dossier-new.c: variable 'pref_quit_on_escape'
     2014- 6-30 done

  15 2014- 5- 4 take into account cancel on escape preference in
                dossier_new assistant
     2014- 5- 5 Done

  16 2014- 5- 4 preference: ask confirmation when clicking cancel in
                an assistant
     2014- 5- 5 ofa-dossier-new.c: variable 'pref_confirm_on_cancel'
     2014- 6-30 done

  17 2014- 5- 4 preference: ask confirmation when hitting escape in
                an assistant
     2014- 5- 5 ofa-dossier-new.c: variable 'pref_confirm_on_escape'
     2014- 6-30 done

  19 2014- 5- 4 Dossier/New - page p1: provider selection: fix the order
                of the focus of the fields (provider selector is the first
                but should be the second)
     2014- 5- 5 Done

  20 2014- 5- 5 DossierNew: display the asterisks (mandatory)
                in another color (grey ? red ? blue ?)
     2014- 5-22 see also Todo #85
     2014- 7-19 cancelled

  22 2014- 5- 7 Assistant DossierNew: determine if an holder should be
                hidden (the initial connection password is just entered
                as clear text, but shouldn't) - For now, there is a bad
                hack on the holder id 'PASSWORD'
                (see do_init_p2_provider_params and display_p4_params
                 functions)
     2014- 5- 7 Given up with 0.1.9-libgda version

  24 2014- 5- 8 Have a configuration parameter which says if user
                preferences supersede global ones, or if global
                preferences must be seen as mandatory ones.
     2014- 5- 9 cancelled

  25 2014- 5- 8 ofa_utils_g_value_compare
     2014- 5- 9 cancelled

  26 2014- 5- 8 ofa_utils_g_value_dup
     2014- 5- 9 cancelled

  27 2014- 5- 8 ofa_utils_g_value_new_from_string
     2014- 5- 9 cancelled

  28 2014- 5- 8 ofa_utils_g_value_dump
     2014- 5- 9 cancelled

  29 2014- 5- 8 Define a G_TYPE_STRING_LIST GType to be used as a GValue
     2014- 5- 9 cancelled

  30 2014- 5- 8 Define a G_TYPE_INT_LIST GType to be used as a GValue
     2014- 5- 9 cancelled

  31 2014- 5- 8 Undo the actions partially done if Dossier New cannot be
                terminated (acting as a commit transaction), so that all
                is left as this was initially if something goes wrong
     2014- 7-19 when undoing, let the user choose if database and user
                should be dropped
     2014- 7-19 properly deleting a user:
                delete from user...
                + drop user
                + flush privileges
     2014- 7-19 done - svn #3795

  32 2014- 5- 9 settings_gvalue_compare to be written
     2014- 5- 9 cancelled

  33 2014- 5- 9 DossierNew: get rid of error_on_applied variable which
                appears useless since we have abandonned libgda
     2014- 5-10 Done

  34 2014- 5- 9 DossierNew: move the settings key names to ofa_settings
                (as ofa_settings_get_dossier)
     2014- 5-10 Done

  37 2014- 5-11 DossierNew: fix the order of the focus on pages p2 and
                p3 (a try with gtk_container_set_focus_chain is not
                successful)
     2014- 7-14 closed - cf. #277

  38 2014- 5-11 DossierOpen: fix the order of the focus
     2014- 5-22 done

  39 2014- 5-11 DossierNew: add fields needed to complete the
                OFA_T_DOSSIER table to p1 page
     2014- 6-30 same fields than DossierProperties
     2014- 7-14 closed - cf. #280

  44 2014- 5-13 ofaAccountsChart: set an accelerator for each page of
                the classes book (e.g. Alt+1, etc.); set the label of
                this accel as a tooltip of the notebook's page
     2014- 5-22 done svn #3474

  45 2014- 5-13 ofaMainWindow left pane: set the width of the tree
     2014- 7-14 done (pane position is saved)

  46 2014- 5-13 chart of accounts: this is a user preference whether
                a double clic enter in 'Update' or in 'Consult entries'
     2014- 5-24 no, default should be to update, as this the general 
                rule for other treeviews

  47 2014- 5-13 ofaAccountProperties: check that account number begins
                with a 1-9 digit
     2014- 5-15 Done

  48 2014- 5-14 ofoDossier: loading accounts chart should be made with
                collaboration of ofoAccount typically for the list of
                fields 
     2014- 5-14 Done

  50 2014- 5-17 when defining a new model, the default family should be
                the current family in models_set
     2014- 5-22 Family class is abandonned, but the subject is the same 
                with Journal class
     2014- 5-26 Done - svn #3508

  51 2014- 5-17 Be able to use an underscore in the label of the model
                families; this underscore should be usable as a shortcut
                when dealing with the models in models set
     2014- 5-22 Family class is abandonned, but the subject is the same 
                with Journal class
     2014- 5-22 done svn #3477

  53 2014- 5-17 on pages which embed a notebook, one should reset
                button sensititviy when switching the page
                because the on_selection_changed may not be triggered,
                e.g. if the list is empty
     2014- 5-27 done

  54 2014- 5-18 remove GtkWindow *parent from ofa_sgbd arguments,
                re-enabling error messages.
     2014- 5-22 done svn #3472

  55 2014- 5-18 ofo_dossier_insert: use ofoBase virtual function.
     2014- 5-24 definitively, no -> cancelled

  56 2014- 5-19 have an entry-derived class for date
     2014- 6-26 done - svn #3748

  59 2014- 5-19 reset all sentences in english
                as the g_date_set_parse uses the current locale, the 
                only way to enter a date as dd/mm/yyyy is to use the
                french locale 
     2014- 5-22 done

  62 2014- 5-19 review all the rates management:
                there should be a master record (the rate) and child
                records (the different periods of validity)
     2014- 5-26 done

  63 2014- 5-19 TauxPropertiesDlg: second column of grid seems to extends,
                but shouldn't. Labels on the third column are correctly 
                left-aligned but shifted on the right 
     2014- 5-26 done

  64 2014- 5-19 there is no need to store the dataset in the ofaMainPage
                as the TreeModel is enough to store the data
     2014- 5-27 done - svn #3510

  65 2014- 5-19 Entry model properties: be able to reorder the detail
                lines by drag and drop. 
     2014- 5-27 cancelled (not useful)

  66 2014- 5-19 Entry model properties - check_enable_dlg
                check that detail lines are ok (enough and balanced).
     2014- 5-22 done

  67 2014- 5-19 EntryModel properties: row number is not right aligned
                but should
     2014- 5-22 done

  68 2014- 5-19 EntryModel properties: display row number as an 
                insensitive (grayed) text
     2014- 5-22 done

  69 2014- 5-19 EntryModel properties: implement Up/Down
     2014- 5-27 done - svn #3514

  70 2014- 5-19 EntryModel properties: implement Remove with a user
                confirmation.
     2014- 5-26 no confirmation needed as it is enough for the user to
                hit the Cancel key to cancel its modifications
     2014- 5-27 done

  71 2014- 5-19 Get an entry with a model
     2014- 5-22 done

  72 2014- 5-20 check that ofaJournalCombo object is disposed
     2014- 5-20 done svn commit #3463

  73 2014- 5-20 GuidedInput: use TAB to navigate between fields of the
                entries tree view
     2014- 5-21 done by using GtkGrid + GtkEntry instead of a treeview.

  74 2014- 5-21 Guided input: when quitting the dialog with Escape
                while the focus is on an Account entry, then the
                account notebook fires, but shouldn't.
     2014- 5-27 replace the focus-out-event by a Tab keypressed monitor
     2014- 5-27 done - svn #3515

  75 2014- 5-21 Optimize AccountNotebook to not recreate it each time
                it is called
     2014- 5-27 done - svn #3513

  76 2014- 5-21 Open AccountNotebook on a specified account, or as close
                as it is possible when only giving first digit(s)
     2014- 5-22 Done svn #3475

  77 2014- 5-21 Guided Input: default effect date is operation date
                or first davailable date
     2014- 5-28 done - svn #3516

  78 2014- 5-21 Guided Input: check that the effect date is valid
     2014- 5-28 done - svn #3516

  80 2014- 5-21 my-utils: replace g_strdup_printf with g_date_strftime
     2014- 9-14 cancelled as without added value

  81 2014- 5-21 guided input: check_for_entry: also check that total
                debit+credit balance is not nul
     2014- 5-21 done svn #3488

  82 2014- 5-21 when creating a new entry, also pass the dossier so 
                that the record is immediately written in sgbd
     2014- 5-21 done

  83 2014- 5-21 account notebook: display sum of validated+rough
                balances
     2014- 5-22 Done svn# 3478

  84 2014- 5-21 Port the GuidedInput code model to ModelProperties
                (GtkGrid+GtkEntry instead of GtkTreeView)
     2014- 5-27 done - svn #3511

  87 2014- 5-22 Guided input: check that the selected account is of
                type detail
     2014- 5-22 done

  88 2014- 5-22 rename ofaSgbd to ofoSgbd
     2014 -5-22 done svn #3471

  90 2014- 5-22 remove GtkWindow *parent from dbmodel_to_v1 arguments
     2014- 5-22 done svn #3473

  91 2014- 5-22 the name of the class names in the accounts chart
                should be configured in a table
     2014- 5-31 done - svn #3587

  92 2014- 5-22 are we allowed to delete a journal ?
                - if it contains some entries ? -> NO
                - if entry models are defined on it ? -> yes, but
                  entry models have so to be reclassed in "no journal"
                  which made them invalid if their journal is locked
     2014- 5-22 actually, no - cf. svn #3495 

  93 2014- 5-22 implement journal_load_set: load the journal_det
                table
     2014- 5-22 done

  94 2014- 5-22 implement journal_record_entry
     2014- 5-28 done - svn #3518

  95 2014- 5-22 implement journal_is_deletable
     2014- 5-22 done

  97 2014- 5-22 journals set: add a 'view entries' function 
     2014- 5-24 done - svn #3496

  98 2014- 5-22 refactoring of ofoBase which maintains the dataset
                as a private data of the class
                -> ofoJournal - done svn #3480
                -> ofoDevise - done svn #3483
                -> ofoAccount - done svn #3484
                -> ofoTaux - done
                -> ofoModel -> done svn #3485
                -> ofoEntry

  99 2014- 5-23 when loading Journal, only load for the current exercice
     2014- 5-24 done: for now, load all what is exists

 102 2014- 5-24 test the GtkTreeSortable interface - if not works:
                define an interface for ofaMainPage which sorts the 
                embedded treeview on the specified column
     2014- 5-24 done - svn #3487

 103 2014- 5-24 load OFA_T_DOSSIER data when opening
     2014- 5-28 done - svn #3535

 104 2014- 5-24 when updating a devise, only enable OK if code is not
                a duplicate
     2014- 5-24 done - svn #3489

 105 2014- 5-24 after delete, reset the focus to tree view
     2014- 5-24 done with devise - svn #3489
     2014- 5-24 done with journal - svn #3494
     2014- 5-26 done with taux - svn #3505

 106 2014- 5-24 check how and when is set the ofaMainPage 'theme' 
                property ?
     2014- 5-24 done svn #3491

 108 2014- 5-24 ofaJournalsSet: implement on_view_entries
     2014- 6-11 done - svn #3685

 109 2014- 5-25 Devises: add notes, maj_user and maj_stamp
     2014- 5-25 done - svn #3501

 110 2014- 5-25 p1-last-update -> px-last-update
     2014- 5-25 done - svn #3500

 111 2014- 5-26 ofo_taux_get_val_rate_by_date
     2014- 6-18 done - svn #3723

 112 2014- 5-26 dispose_has_run is a protected data of the ofoBase
                base class
     2014 -5-26 done svn #3506

 113 2014- 5-26 have a base class for properties dialogs
     2014- 5-28 done - svn #3540

 115 2014- 5-26 it seems that an account cannot be finalized after 
                having be udated in AccountsChart (ref count issue ?)
     2014- 5-26 done - svn#3509

 116 2014- 5-26 only include '-def.h' header files in the headers
     2014- 5-28 done - svn #3527

 117 2014- 5-27 ofaModelsProperties: implement account selection
     2014- 5-28 done - svn #3519

 118 2014- 5-27 ofaGuidedInput: implement account selection
     2014- 5-28 done - svn #3520

 119 2014- 5-27 ofaAccountNotebook: scroll the view for display the
                initial selection
     2014- 5-27 done - svn #3512

 120 2014- 5-28 import accounts
     2014- 6- 6 done - svn #3645

 121 2014- 5-28 import entry models
     2014- 6-14 done - svn #3708

 122 2014- 5-28 import journals
     2014- 6- 7 done

 123 2014- 5-28 import currencies
     2014- 6- 7 done

 124 2014- 5-28 import standard rates
     2014- 6- 9 done - svn #3674

 125 2014- 5-28 import accounts
     2014- 6- 7 done

 127 2014- 5-28 ofaAccountNotebook: update amount accounts on new entry
     2014- 5-29 done - svn #3547

 128 2014- 5-28 Dossier: have a default currency
     2014- 5-31 done - svn #3569

 131 2014- 5-28 have a currency combo box convenience class
     2014- 5-31 done - svn #3566

 132 2014- 5-28 remove my_utils_init_notes_ex and 
                my_utils_init_maj_user_stamp_ex as they should be no 
                more used when all dialog box will be derived from 
                ofaBseDialog
     2014- 5-31 done - svn #3568

 133 2014- 5-28 ofaAccountProperties makes use of ofaDeviseCombo
     2014- 5-31 done - svn #3567

 134 2014- 5-28 ofaAccountSelect derives from ofaBaseDialog
     2014- 5-29 done - svn #3544

 135 2014- 5-28 odaDeviseProperties derives from ofaBaseDialog
     2014- 5-29 done - svn #3545

 136 2014- 5-28 ofaDossierOpen derives from ofaBaseDialog
     2014- 5-29 done - svn #3546

 137 2014- 5-28 ofaDossierProperties derives from ofaBaseDialog
     2014- 5-30 done - svn #3557

 138 2014- 5-28 ofaGuidedInput derives from ofaBaseDialog
     2014- 5-30 done - svn #3558

 139 2014- 5-28 ofaJournalProperties derives from ofaBaseDialog
     2014- 5-30 done - svn #3559

 140 2014- 5-28 ofaModelProperties derives from ofaBaseDialog
     2014- 5-30 done - svn #3560

 141 2014- 5-28 ofaTauxProperties derives from ofaBaseDialog
     2014- 5-30 done - svn #3561

 142 2014- 5-28 remove xxxClassPrivate
     2014- 5-30 done - svn #3556

 143 2014- 5-29 add iso 3a code to accout notebook view
     2014- 5-29 done - svn #3548

 144 2014- 5-29 always use g_define_type 
     2014- 5-30 done - svn #3562

 145 2014- 5-30 get rid of xxx_GET_PRIVATE macro
     2014- 5-31 done - svn #3563

 150 2014- 6- 2 Reconciliation: when entries have been fetched, set the
                'label' title column to the account label
     2014- 6- 3 done

 154 2014- 6- 3 be able to re-use an already imported BAT (for the same
                account) if we have been interrupted in a previous
                session
     2014- 6- 4 done - svn #3617

 157 2014- 6- 4 BatList: the treeview doesn't vertically expand
     2014- 6- 4 done

 159 2014- 6- 4 open a dossier from the command-line:
                ./_install/bin/openbook "Test OFAT v0.3" ofat ofat
     2014- 6- 7 done - svn #3662

 160 2014- 6- 4 print a reconciliation page (as a pdf)
     2014- 6-21 done

 166 2014- 6- 5 Have an audit table which records _all_ sql queries
                This may be managed by ofoSgbd class
     2014- 6- 7 done - svn #3660

 168 2014- 6- 6 ImportAssistant: check that only one file is selected
                when importing a reference table or entries (multiple
                selection is in fact only allowed when importing BAT)
                So is it worth ?
     2014- 6- 7 done - svn #3659

 169 2014- 6- 6 rename ofaBatList to (e.g.) ofaBatCommon
     2014- 6- 7 done - svn #3658

 170 2014- 6- 6 rename ofaAccountNotebook to (e.g.) ofaAccountCommon
     2014- 6- 7 cancelled

 171 2014- 6- 6 rename ofaDeviseCombo to (e.g.) ofaDeviseCommon
     2014- 6- 7 cancelled

 172 2014- 6- 6 rename ofaJournalCombo to (e.g.) ofaJournalCommon
     2014- 6- 7 cancelled

 173 2014- 6- 6 When importing a reference, the main page must be 
                reloaded
     2014- 6- 7 done with OFA_SIGNAL_RELOADED_DATASET signal handler

 175 2014- 6- 6 When opening a dossier in response to 
                OFA_SIGNAL_OPEN_DOSSIER signal, one should 
                unconditionally close a previously already opened
                dossier.
     2014- 6- 7 done - svn #3657

 178 2014- 6- 9 ofaModelsSet: manage update journal (tab labels)
     2014- 6-12 same item as #52 

 180 2014- 6- 9 ofoEntry: manage change journal mnemo
     2014- 6-12 done - svn #3706

 181 2014- 6- 9 ofoModel: manage change journal mnemo
     2014- 6-12 ofoModel: manage change taux mnemo
     2014- 6-12 done - svn #3706

 185 2014- 6-10 imported entries must be balanced
     2014- 6-10 done - svn #3681

 187 2014- 6-10 TauxProperties: the validities begin and end displayed
                in the treeview do not take into account all validity
                records
     2014- 6-13 fixed

 188 2014- 6-10 ImportAssistant: doesn't know import multi-lines notes
     2014- 6-16 done - svn #3712

 189 2014- 6-10 AccountProperties: Balance date: Entry -> Last entry
     2014- 6-11 done - svn #3686

 190 2014- 6-10 Have a display of journal balances
     2014- 6-13 done

 192 2014- 6-11 save database:
                mysqldump pwi_consultants -uwieser -pwieser | gzip -c 
                 >/tmp/pwi_consultants-20140611.gz
     2014- 8-31 done - svn #3842

 193 2014- 6-11 record the entry most recent effect date in the
                 journal_exe_dev detail
     2014- 6-13 done

 196 2014- 6-11 journal closing: there is no sens to execure the same 
                query SELECT MAX(JOU_EXE_LAST_CLO) FROM OFA_T_JOURNAUX_EXE
              	WHERE JOU_MNEMO='AC' each time we change a char in the
              	date entry
     2014- 6-12 done - svn #3702

 197 2014- 6-12 g_signal_connect (e.g.) to dossier: must disconnect from
                the instance if it stays alive and we are willing to
                reconnect a new handler later
     2014- 6-12 done - svn #3701

 198 2014- 6-12 go up the ofo_account_init_handlers to ofaMainWindow
                in order to systematize the connection to signals
     2014- 6-12 actually goes to ofo_dossier_open()
     2014- 6-12 done - svn #3704

 199 2014- 6-12 does the ofoEntry class not need a init_handlers also ?
     2014- 6-12 not yet

 200 2015- 6-12 do not try to close a journal at the same date
     2015- 6-12 done - svn #3702

 201 2014- 6-12 systematize ofo_xxx class connect handlers when opening
                the dossier
     2014- 6-12 done for classes who need this - svn #3706

 202 2014- 6-12 check that dossier is alive when disconnecting the
                handlers
     2014- 6-12 done - svn #3706

 203 2014- 6-12 DATESET_GLOBAL should not be systematic when connecting
                the handlers. Instead they should be set back when 
                needed
     2014- 6-13 done

 204 2014- 6-12 check_for_enable_dlg/is_dialog_validable: should only
                check the modified data => the checked data should be
                flagged, and this flag unset when the data is modified
     2014- 8-17 this is done in later dialog box (e.g. ofa-dossier-new),
                but will not be reported in already written

 205 2014- 6-12 ofoClass: get rid of ofoDossier argument in insert,
                update and delete public methods (see ofoAccount)
     2014- 6-13 done

 206 2014- 6-12 ofoDevise: get rid of ofoDossier argument in insert,
                update and delete public methods (see ofoAccount)
     2014- 6-13 done

 207 2014- 6-12 ofoJournal: get rid of ofoDossier argument in insert,
                update and delete public methods (see ofoAccount)
     2014- 6-13 done

 208 2014- 6-12 ofoModel: get rid of ofoDossier argument in insert,
                update and delete public methods (see ofoAccount)
     2014- 6-13 done

 209 2014- 6-12 ofoTaux: get rid of ofoDossier argument in insert,
                update and delete public methods (see ofoAccount)
     2014- 6-13 done

 210 2014- 6-12 move all dialogs from ofaBaseDialog to myDialog
                - acount properties  - done
                - account select     - done
                - bat properties     - done
                - bat select         - done
                - class properties   - done
                - devise properties  - done
                - dossier open       - done
                - dossier properties - done
                - guided input       - done
                - journal properties - done
                - model properties   - done
                - taux properties    - done
     2014- 7-14 done - svn #3782 

 211 2014- 6-12 move all assistants to myAssistant
                - import
                - export
                - new dossier
     2014- 7-14 closed - cf. #281 and #282

 214 2014- 6-13 edit rough entries
     2014- 6-21 have a visual distinction depending of the entry status:
                ok
     2014- 6-21 forbid the edition and disable the edition switch when 
                on a validated entry: ok
     2014- 6-21 modified entries should be saved when we change the 
                current row
     2014- 6-21 connect to dossier signals to be advertised on 
                intermediate closing, new entries..
     2014- 6-24 done - svn #3746

 218 2014- 6-15 this is an error if entry number is not strictly 
                increasing when we update the account balance
     2014- 6-20 done - svn #3745

 221 2014- 6-16 GuidedInput: the dialog box has two rows Cancel-OK
     2014- 6-16 done - svn #3717

 222 2014- 6-16 GuidedInput: Cancel should reset the fields (but not
                the dates)
     2014- 6-18 done

 223 2014- 6-16 DossierProperties: add a tab for the current exercice
                enter begin and end dates, display last entry number
     2014- 6-20 done - svn #3744

 225 2014- 6-16 When selecting an account, should be able to create a
                new account
     2014- 6-20 + have the standard facilities of the accounts chart
                (new, update, delete, view entries) ; this would imply
                that view entries is able to run in a dialog box
     2014- 6-20 done - svn #3737

 226 2014- 6-16 Notes should be passed to 4096 chars
     2014- 6-16 done - svn #3713

 227 2014- 6-16 Duplicate an entry model
     2014- 6-16 done - svn #3716

 228 2014- 6-16 Entry model, after having clicked '+', set the focus
                on the just inserted 'comment' field
     2014- 6-16 done - svn #3715

 230 2014- 6-16 Viewing entries: it is not worth to display the 
                currency code on each line when displaying per account
                (only the footer balance line is useful)
     2014- 6-16 done - svn #3714

 231 2014- 6-16 Viewing entries: take care of not adding different
                currencies when viewing per journal + have a balance
                per currency
     2014- 6-16 done - svn #3714

 232 2014- 6-16 ofaGuidedEx: seg fault
     2014- 6-16 done - svn #3718

 233 2014- 6-16 factorize the code common to ofaGuidedInput and
                 ofaGuidedEx
     2014- 6-17 done - svn #3721  

 235 2014- 6-17 xxxx_get_type() function should be in xxxx-def.h file
     2014- 6-20 done - svn #3734

 236 2014- 6-18 when updating an entry model, the right pane of
                ofaGuidedInputEx should be updated (if the updated
                entry model is currently displayed)
     2014- 6-20 done - svn #3730

 237 2014- 6-20 Print reconciliation: have a light gray background
                every other line
     2014- 6-20 done - svn #3728

 238 2014- 6-20 ofoEntry: only entries of the current exercice must
                be updated of the mnemo of the journal is modified
                (but we have UPDATE OFA_T_ECRITURES 
                SET ECR_JOU_MNEMO='TRESO' WHERE ECR_JOU_MNEMO='BQ')
     2014- 6-20 this was already ok (just have to set the beginning
                of the exercice) - comment added - svn #3733

 239 2014- 6-20 DELETE FROM OFA_T_MODELES_DET WHERE MOD_MNEMO='EFBUR2'
                is called twice
     2014- 6-20 done - svn #3732

 240 2014- 6-20 entry model properties: the journal combo should 
                display labels (and so the corresponding GtkLabel
                should be removed) 
     2014- 6-20 done - svn #3731

 241 2014- 6-20 ofaJournalTreeview: pfnSelection becomes pfnSelected,
                pfnActivation becomes pfnActivated
     2014- 6-20 done - svn #3743

 242 2014- 6-20 ofaJournalCombo: pfn becomes pfnSelected
     2014- 6-20 done - svn #3742

 243 2014- 6-20 ofaDeviseCombo: pfn becomes pfnSelected
     2014- 6-20 done - svn #3741

 244 2014- 6-20 ofaAccountNotebook: pfnSelect becomes pfnSelected,
                pfnDoubleClic becomes pfnActivated
                + have a single user_data for the two callbacks
     2014- 6-20 done - svn #3736

 245 2014- 6-20 ofa_account_notebook_init_dialog() becomes
                 ofa_account_notebook_new()
     2014- 6-20 done - svn #3736

 246 2014- 6-20 ofa_devise_combo_init_combo() becomes
                 ofa_devise_combo_new()
     2014- 6-20 done - svn #3740

 247 2014- 6-20 ofaAccountSelect: be able to view entries in a dialog
                box - or disable the button
     2014- 6-20 done - svn #3738

 248 2014- 6-20 ofaMainPage: has_import_export becomes has_import+
                has_export
     2014- 6-20 done - svn #3739

 249 2014- 6-20 record user and stamp on entry reconciliation
     2014- 8-24 done - svn #3824

 250 2014- 6-20 Print Reconciliation: display dates as dd/mm/yyyy
     2014- 6-27 done

 251 2014- 6-21 ofaIntClosing:do_close: 
                replace ofa_journal_treeview_foreach_sel()
                Rationale: The model has been modified from within 
                gtk_tree_selection_selected_foreach. This function is 
                for observing the selections of the tree only.  If you
                are trying to get all selected items from the tree, try 
                using gtk_tree_selection_get_selected_rows instead.
     2014- 6-27 done

 257 2014- 6-23 editing rough entries: insert a new line
     2014- 6-27 done

 258 2014- 6-23 editing rough entries: delete a line
     2014- 6-27 done - svn #3750

 261 2014- 6-27 TauxProperties: update ofoTaux with GDate and rate as a
                gdouble instead of strings
     2014- 9-14 cancelled as without added value
     2014- 9-14 reopened -> rate as a gdouble
     2014-10- 5 done

 263 2014- 6-27 PrintReconciliation: when there is no entry, the footer
                is displayed in the top of the page, instead of the
                bottom
     2014- 6-27 done - svn #3749 

 266 2014- 6-27 PrintReconciliation: the page footer makes use of a
                system timestamp (yyyy-mm-dd hh:mi:ss) but should 
                rather be a 'user-friendly' timestamp (dd/mm/yyyy hh:mi)
     2014- 6-27 done - svn #3751

 267 2014- 6-27 PrintReconciliation: when the account is empty (no entry
                has never been imputed), then no date is displayed on 
                the account solde line. 
                At least, should use the entered reconciliation date.
     2014- 6-27 done - svn #3753

 268 2014- 6-27 ViewEntries: when selecting an account, set default
                currency on the currently edited line if not already
                set
     2014- 6-27 done - svn #3752

 270 2014- 6-27 ViewEntries: compute_balances() doesn't know how to
                parse an amount with a space thousand separator
     2014- 8-18 OFA-DEBUG: on_cell_edited: text='23,45', amount=23,450000, str='23,45'
                OFA-DEBUG: save_entry: sdeb='23,45', debit=23,450000, scre='0,00', credit=0,000000
                OFA-DEBUG: ofo_sgbd_query: sgbd=0x10a6400, query='UPDATE OFA_T_ECRITURES 	SET ECR_DEFFET='2014-01-01',ECR_DOPE='2014-01-01',ECR_LABEL='sdfgsdfgsdfg',ECR_REF='(null)',	ECR_COMPTE='41198',ECR_DEV_CODE='EUR',ECR_JOU_MNEMO='ACH',	ECR_DEBIT=23.449999999999999,ECR_CREDIT=0,	ECR_MAJ_USER='ofat',ECR_MAJ_STAMP='2014-08-18 05:03:06' 	WHERE ECR_NUMBER=328', display_error=True
                [...]
                OFA-DEBUG: on_cell_edited: text='1223,45', amount=1223,450000, str='1 223,45'
                OFA-DEBUG: save_entry: sdeb='1 223,45', debit=1,000000, scre='0,00', credit=0,000000
                OFA-DEBUG: ofo_sgbd_query: sgbd=0x10a6400, query='UPDATE OFA_T_ECRITURES 	SET ECR_DEFFET='2014-01-01',ECR_DOPE='2014-01-01',ECR_LABEL='sdfgsdfgsdfg',ECR_REF='(null)',	ECR_COMPTE='41198',ECR_DEV_CODE='EUR',ECR_JOU_MNEMO='ACH',	ECR_DEBIT=1,ECR_CREDIT=0,	ECR_MAJ_USER='ofat',ECR_MAJ_STAMP='2014-08-18 05:03:11' 	WHERE ECR_NUMBER=328'
     2014- 9- 6 done

 274 2014- 6-29 put back the main GtkNotebook popup menu
     2014- 8-17 done - svn #3820

 275 2014- 6-30 DossierNew: should be able to use the same db account
                than another database (so ignore duplicate account)
     2014- 8-17 done - svn #3810

 276 2014- 7-13 ofoSgbd: move error management to caller (as GError)
                so that caller may decide what to do instead of 
                displaying an error message
     2014- 7-18 query option: ignore error, display error
                query option: no audit
     2014- 8-17 display error is reported in ofoSgbd, set up when calling
                the method - cancelled

 277 2014- 7-13 DossierNew is not an assistant, but a dialog box
     2014- 7-14 done - svn #3769

 278 2014- 7-13 extend to other sgdb providers (PostgreSQL, etc.)
     2014- 8-17 cancelled (see #276)

 279 2014- 7-14 Manage dossiers, manage databases (delete, reconciliate)
     2014- 7-14 done - svn #3794

 280 2014- 7-14 DossierNew: update properties right after having opened
                the dossier
     2014- 7-14 done - svn #3770

 283 2014- 7-14 DossierNew: set the default values:
                - long label should default to dossier short label
                - exercice length
     2014- 7-14 done - svn #3772

 284 2014- 7-14 Dossier Properties : ok is not enabled
     2014- 7-14 done - svn #3771

 285 2014- 7-14 DossierNew: there is an error in a SQL sentence
     2014- 7-14 the error appears because of a bad quoting when 
                inserting into ofa_t_audit
     2014- 7-14 done - svn #3785

 286 2014- 7-14 DossierNew: audit table doesn't exist
     2014- 7-14 done - svn #3773

 287 2014- 7-14 ofa_account_notebook_init_view: 
                assertion `page_w && GTK_IS_CONTAINER( page_w )' failed
                (when there is no account ?)
     2014- 7-14 done - svn #3784

 288 2014- 7-14 DossierNew: enable dlg should not depend of connection
                check
     2014- 7-14 done - svn #3787

 289 2014- 7-14 DossierNew: there is no error message when passwords 
                are not equals
     2014- 7-14 done - svn #3786

 290 2014- 7-15 in classes (finalize, init), g_debug should appear
                before g_return_if_fail (in order to know why something
                fails)
     2014- 7-18 done

 291 2014- 7-19 DossierManage: if host is empty, display 'localhost'
                in italics
     2014- 8-21 done - svn #3823

 292 2014- 7-19 DossierManage: be able to update external dossier
                properties (those which are displayed by dossier
                manager)
     2014- 8-17 no obvious use case - cancelled

 293 2014- 7-19 isolate in a structure the MySQL connection parameters
                and union it in a structure passed through functions
                and able to hold other providers
     2014- 8-17 obsoleted with introduction of DBMS provider plugins
                as of svn #3810

 294 2014- 7-19 what to do when deleting a dossier is a preference
     2014- 7-21 done

 295 2014- 7-19 ask confirmation when dropping an existing db
     2014- 7-20 done - svn #3799

 297 2014- 7-20 DossierManage: when deleting a dossier, make use of
                ofa_dossier_delete_run_direct() method
     2014- 8-17 use now ofa_idbms_delete_dosser() interface method
     2014- 8-17 closed

 298 2014- 7-30 ofa_sgbd: remove get_host() function
     2014- 8-17 done - svn #3810

 299 2014- 7-30 ofa_settings: cleanup ofa_settings_set/get_dossier
     2014- 8-17 done - svn #3810

 300 2014- 8- 7 Dossier Manager: have an Open button
     2014- 8-17 done - svn #3818

 301 2014- 8- 7 Dossier Manager: have a New button
     2014- 8-17 done - svn #3815

 302 2014- 8- 9 sgbd should be dbms
     2014- 8-17 eventually the interface is named ofaIDbms, but the
                convenience object ofoSgbd keeps to be named like that
     2014- 8-17 closed

 304 2014- 8-24 Archive account balances on intermediate closing
     2014- 8-24 this is not relevant as we are not closing accounts,
                but journals -> cancelled

 305 2014- 8-24 have a plugin management menu item
     2014- 8-24 done - svn #3829

 306 2014- 8-24 have a plugin preferences api
     2014- 8-24 done - svn #3830

 307 2014- 8-26 label+account+password should be kept in the DBMS 
                connection structure (and not in the ofoSgbd data)
     2014- 9- 5 done

 308 2014- 8-26 mysql: have a get_connect_parms() function to read a
                mysqlConnect structure from the settings
     2014- 9- 5 done

 309 2014- 9-13 when inserting into TAUX: TAX_VAL_DEB cannot be null
                but should be allowed to
     2014- 9-15 done

 315 2014-10- 3 the originating model should be kept in the generated
                entries
                - dossier_v1 - ok
                - update entries when model mnemo changes - ok
                - setter/getter - ok
                - export entries - ok
                - import entries - ok
                - set model mnemos when generating entries - ok
                - add in view_entries - postponed
                - check ecritures before delete an ope template - ok
     2014-10- 5 done - svn #3882

 316 2014-10- 4 ofo_entry.c: optimize entry_count_for_xxx() methods
     2014-10- 5 done - svn #3883

-----------------------------------------------------------------------
 P. Wieser - Last updated on 2014, may 2nd
